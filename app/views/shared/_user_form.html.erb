<% action = (type == :newuser) ? users_url : session_url %>
<% button_text = (type == :newuser) ? "Sign Up" : "Sign In" %>
<form action="<%= action %>" method="POST">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
  <label for="user_username">Username:</label>
  <input type="text" value="<%= @user.username %>" name="user[username]"
  id="user_username">
  <br/>
  <label for="user_password">Password:</label>
  <input type="password" value="<%= @user.password %>" name="user[password]"
  id="user_password">
  <br/>
  <input type="submit" value="<%= button_text %>">
</form>

<form action="<%= session_url %>" method="POST">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
	
  <input type="hidden" value="guest" name="user[username]" id="user_username">
  <br/>
	
  <input type="hidden" value="password" name="user[password]"id="user_password">
  <br/>
	
  <input type="submit" value="Login as guest">
</form>